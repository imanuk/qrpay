<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NatWest Android Link Test</title>
    <style>
        body { 
            font-family: system-ui, -apple-system, sans-serif;
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
        }
        button {
            display: block;
            width: 100%;
            margin: 10px 0;
            padding: 15px;
            background: #1a4896;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
        }
        .debug {
            margin-top: 10px;
            padding: 10px;
            background: #f0f0f0;
            border-radius: 4px;
            font-size: 12px;
            word-break: break-all;
        }
    </style>
</head>
<body>
    <h1>NatWest Android Deep Link Test</h1>
    
    <div id="linkTests"></div>

    <script>
        const testData = {
            sort: '123456',
            account: '12345678',
            name: 'Test Payment',
            amount: '10.00',
            reference: 'TEST123'
        };

        // Different formats to try
        const tests = [
            {
                name: "Android App Links",
                url: `https://personal.natwest.com/payments/transfer?sortCode=${testData.sort}&accountNumber=${testData.account}&amount=${testData.amount}&reference=${testData.reference}`,
                description: "Using HTTPS format that should open in app"
            },
            {
                name: "Android Intent with S2S",
                url: `intent://personal.natwest.com/payments/transfer?sortCode=${testData.sort}&accountNumber=${testData.account}&amount=${testData.amount}&reference=${testData.reference}#Intent;scheme=https;package=com.rbs.mobile.android.natwest;S.browser_fallback_url=https://personal.natwest.com;end`,
                description: "Using Android Intent with S2S format"
            },
            {
                name: "Market Intent",
                url: `market://details?id=com.rbs.mobile.android.natwest&url=natwest://payment?sort=${testData.sort}&acc=${testData.account}&amount=${testData.amount}&ref=${testData.reference}`,
                description: "Using market:// scheme with deep link parameters"
            },
            {
                name: "Direct Intent Format",
                url: `intent://payment#Intent;scheme=natwest;package=com.rbs.mobile.android.natwest;S.sort=${testData.sort};S.acc=${testData.account};S.amount=${testData.amount};S.ref=${testData.reference};end`,
                description: "Using direct Intent parameters"
            }
        ];

        const container = document.getElementById('linkTests');

        tests.forEach((test, index) => {
            const div = document.createElement('div');
            div.innerHTML = `
                <button onclick="tryLink(${index})">${test.name}</button>
                <div class="debug">
                    ${test.description}<br>
                    URL: ${test.url}
                </div>
            `;
            container.appendChild(div);
        });

        function tryLink(index) {
            const test = tests[index];
            console.log(`Trying: ${test.name}`);
            console.log(`URL: ${test.url}`);
            
            // Create a clickable link and trigger it
            const link = document.createElement('a');
            link.href = test.url;
            link.style.display = 'none';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }
    </script>
</body>
</html>
